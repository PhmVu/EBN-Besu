{
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "internalType": "string", "name": "classId", "type": "string" },
        { "indexed": true, "internalType": "address", "name": "teacher", "type": "address" },
        { "indexed": false, "internalType": "uint256", "name": "timestamp", "type": "uint256" }
      ],
      "name": "ClassClosed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "internalType": "string", "name": "classId", "type": "string" },
        { "indexed": true, "internalType": "address", "name": "teacher", "type": "address" },
        { "indexed": false, "internalType": "uint256", "name": "timestamp", "type": "uint256" }
      ],
      "name": "ClassCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "internalType": "string", "name": "classId", "type": "string" },
        { "indexed": true, "internalType": "address", "name": "student", "type": "address" },
        { "indexed": false, "internalType": "bool", "name": "allowed", "type": "bool" },
        { "indexed": true, "internalType": "address", "name": "teacher", "type": "address" }
      ],
      "name": "PermissionUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "internalType": "string", "name": "classId", "type": "string" },
        { "indexed": true, "internalType": "address", "name": "student", "type": "address" },
        { "indexed": true, "internalType": "address", "name": "teacher", "type": "address" }
      ],
      "name": "StudentAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        { "indexed": true, "internalType": "string", "name": "classId", "type": "string" },
        { "indexed": true, "internalType": "address", "name": "student", "type": "address" },
        { "indexed": true, "internalType": "address", "name": "teacher", "type": "address" }
      ],
      "name": "StudentRemoved",
      "type": "event"
    },
    {
      "inputs": [
        { "internalType": "string", "name": "classId", "type": "string" },
        { "internalType": "address", "name": "student", "type": "address" }
      ],
      "name": "addStudent",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
      "name": "allClassIds",
      "outputs": [{ "internalType": "string", "name": "", "type": "string" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        { "internalType": "string", "name": "", "type": "string" },
        { "internalType": "address", "name": "", "type": "address" }
      ],
      "name": "allowedStudents",
      "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "string", "name": "", "type": "string" }],
      "name": "classExists",
      "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "string", "name": "", "type": "string" }],
      "name": "classes",
      "outputs": [
        { "internalType": "string", "name": "classId", "type": "string" },
        { "internalType": "address", "name": "teacher", "type": "address" },
        { "internalType": "uint8", "name": "status", "type": "uint8" },
        { "internalType": "uint256", "name": "createdAt", "type": "uint256" },
        { "internalType": "uint256", "name": "closedAt", "type": "uint256" }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "string", "name": "classId", "type": "string" }],
      "name": "closeClass",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "string", "name": "classId", "type": "string" }],
      "name": "createClass",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getClassCount",
      "outputs": [{ "internalType": "uint256", "name": "count", "type": "uint256" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "uint256", "name": "index", "type": "uint256" }],
      "name": "getClassIdAt",
      "outputs": [{ "internalType": "string", "name": "classId", "type": "string" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [{ "internalType": "string", "name": "classId", "type": "string" }],
      "name": "getClassInfo",
      "outputs": [
        {
          "components": [
            { "internalType": "string", "name": "classId", "type": "string" },
            { "internalType": "address", "name": "teacher", "type": "address" },
            { "internalType": "uint8", "name": "status", "type": "uint8" },
            { "internalType": "uint256", "name": "createdAt", "type": "uint256" },
            { "internalType": "uint256", "name": "closedAt", "type": "uint256" }
          ],
          "internalType": "struct ClassManager.ClassInfo",
          "name": "classInfo",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        { "internalType": "string", "name": "classId", "type": "string" },
        { "internalType": "address", "name": "student", "type": "address" }
      ],
      "name": "isStudentAllowed",
      "outputs": [{ "internalType": "bool", "name": "allowed", "type": "bool" }],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        { "internalType": "string", "name": "classId", "type": "string" },
        { "internalType": "address", "name": "student", "type": "address" }
      ],
      "name": "removeStudent",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50611563806100206000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c806381f743451161007157806381f743451461019357806388a0e046146101b35780638a7dc32b146101c6578063ae31a877146101d9578063e58c01c5146101fd578063e87c5da11461021057600080fd5b806306817286146100b95780630b01ca3b1461010c57806310468c2f1461011d578063375e379f14610132578063568dde7414610160578063632a665514610173575b600080fd5b6100f76100c73660046110ec565b81516020818401810180516001825292820194820194909420919093529091526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b600354604051908152602001610103565b61013061012b3660046110ec565b610223565b005b6100f761014036600461114a565b805160208183018101805160028252928201919093012091525460ff1681565b61013061016e36600461114a565b6104fd565b610186610181366004611187565b6106ab565b60405161010391906111f0565b6101a66101a136600461114a565b6107b6565b6040516101039190611242565b6100f76101c13660046110ec565b610946565b6101306101d436600461114a565b610a07565b6101ec6101e736600461114a565b610c66565b6040516101039594939291906112a3565b61013061020b36600461110ec565b610d37565b61018661021e366004611187565b610f9d565b8160028160405161023491906112e7565b9081526040519081900360200190205460ff1661026c5760405162461bcd60e51b815260040161026390611303565b60405180910390fd5b336001600160a01b031660008260405161028691906112e7565b908152604051908190036020019020600101546001600160a01b0316146102bf5760405162461bcd60e51b815260040161026390611345565b82600080826040516102d191906112e7565b908152602001604051809103902060010160149054906101000a900460ff1660018111156103015761030161120a565b1461031e5760405162461bcd60e51b815260040161026390611397565b6001600160a01b0383166103825760405162461bcd60e51b815260206004820152602560248201527f436c6173734d616e616765723a20496e76616c69642073747564656e74206164604482015264647265737360d81b6064820152608401610263565b60018460405161039291906112e7565b90815260408051602092819003830190206001600160a01b0386166000908152925290205460ff16156104135760405162461bcd60e51b815260206004820152602360248201527f436c6173734d616e616765723a2053747564656e7420616c726561647920616460448201526219195960ea1b6064820152608401610263565b6001808560405161042491906112e7565b90815260408051602092819003830181206001600160a01b03881660008181529190945291909120805460ff19169315159390931790925533916104699087906112e7565b604051908190038120907fa52076e190b4c3ba9eabe61d5f02714fc86a09dac84197eb579ae3efc85ded5f90600090a4336001600160a01b0316836001600160a01b0316856040516104bb91906112e7565b60405190819003812060018252907f8c76e0c52acc07f7d9b1b08884ea6e5a3c479b5a7a48e562b24ae8133d869954906020015b60405180910390a450505050565b8060028160405161050e91906112e7565b9081526040519081900360200190205460ff1661053d5760405162461bcd60e51b815260040161026390611303565b336001600160a01b031660008260405161055791906112e7565b908152604051908190036020019020600101546001600160a01b0316146105905760405162461bcd60e51b815260040161026390611345565b81600080826040516105a291906112e7565b908152602001604051809103902060010160149054906101000a900460ff1660018111156105d2576105d261120a565b146105ef5760405162461bcd60e51b815260040161026390611397565b600160008460405161060191906112e7565b908152602001604051809103902060010160146101000a81548160ff021916908360018111156106335761063361120a565b02179055504260008460405161064991906112e7565b90815260405190819003602001812060030191909155339061066c9085906112e7565b604051908190038120428252907f646299d40fae618982ec21f1c9f783bde496ba3c635d792d8a61ae68be2762c59060200160405180910390a3505050565b60035460609082106107095760405162461bcd60e51b815260206004820152602160248201527f436c6173734d616e616765723a20496e646578206f7574206f6620626f756e646044820152607360f81b6064820152608401610263565b6003828154811061071c5761071c6113ce565b906000526020600020018054610731906113e4565b80601f016020809104026020016040519081016040528092919081815260200182805461075d906113e4565b80156107aa5780601f1061077f576101008083540402835291602001916107aa565b820191906000526020600020905b81548152906001019060200180831161078d57829003601f168201915b50505050509050919050565b6107e96040805160a081018252606081526000602082018190529091820190815260200160008152602001600081525090565b6002826040516107f991906112e7565b9081526040519081900360200190205460ff166108285760405162461bcd60e51b815260040161026390611303565b60008260405161083891906112e7565b90815260200160405180910390206040518060a0016040529081600082018054610861906113e4565b80601f016020809104026020016040519081016040528092919081815260200182805461088d906113e4565b80156108da5780601f106108af576101008083540402835291602001916108da565b820191906000526020600020905b8154815290600101906020018083116108bd57829003601f168201915b50505091835250506001828101546001600160a01b0381166020840152604090920191600160a01b900460ff16908111156109175761091761120a565b60018111156109285761092861120a565b81526002820154602082015260039091015460409091015292915050565b600060028360405161095891906112e7565b9081526040519081900360200190205460ff1661097757506000610a01565b600160008460405161098991906112e7565b908152602001604051809103902060010160149054906101000a900460ff1660018111156109b9576109b961120a565b036109c657506000610a01565b6001836040516109d691906112e7565b90815260408051602092819003830190206001600160a01b0385166000908152925290205460ff1690505b92915050565b600281604051610a1791906112e7565b9081526040519081900360200190205460ff1615610a855760405162461bcd60e51b815260206004820152602560248201527f436c6173734d616e616765723a20436c61737320494420616c72656164792065604482015264786973747360d81b6064820152608401610263565b6000815111610ae55760405162461bcd60e51b815260206004820152602660248201527f436c6173734d616e616765723a20436c6173732049442063616e6e6f7420626560448201526520656d70747960d01b6064820152608401610263565b6040805160a081018252828152336020820152908101600081526020014281526020016000815250600082604051610b1d91906112e7565b90815260405190819003602001902081518190610b3a908261146d565b506020820151600180830180546001600160a01b039093166001600160a01b031984168117825560408601519391926001600160a81b03199092161790600160a01b908490811115610b8e57610b8e61120a565b021790555060608201518160020155608082015181600301559050506001600282604051610bbc91906112e7565b908152604051908190036020019020805491151560ff19909216919091179055600380546001810182556000919091527fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b01610c18828261146d565b506040513390610c299083906112e7565b604051908190038120428252907f51e06df403408d7099d1bbec62baa2192368a55b7e4efcc612e59cf6f4f291eb9060200160405180910390a350565b8051602081830181018051600082529282019190930120915280548190610c8c906113e4565b80601f0160208091040260200160405190810160405280929190818152602001828054610cb8906113e4565b8015610d055780601f10610cda57610100808354040283529160200191610d05565b820191906000526020600020905b815481529060010190602001808311610ce857829003601f168201915b505050506001830154600284015460039094015492936001600160a01b03821693600160a01b90920460ff1692509085565b81600281604051610d4891906112e7565b9081526040519081900360200190205460ff16610d775760405162461bcd60e51b815260040161026390611303565b336001600160a01b0316600082604051610d9191906112e7565b908152604051908190036020019020600101546001600160a01b031614610dca5760405162461bcd60e51b815260040161026390611345565b8260008082604051610ddc91906112e7565b908152602001604051809103902060010160149054906101000a900460ff166001811115610e0c57610e0c61120a565b14610e295760405162461bcd60e51b815260040161026390611397565b600184604051610e3991906112e7565b90815260408051602092819003830190206001600160a01b0386166000908152925290205460ff16610ebc5760405162461bcd60e51b815260206004820152602660248201527f436c6173734d616e616765723a2053747564656e74206e6f7420696e207768696044820152651d195b1a5cdd60d21b6064820152608401610263565b6000600185604051610ece91906112e7565b90815260408051602092819003830181206001600160a01b03881660008181529190945291909120805460ff1916931515939093179092553391610f139087906112e7565b604051908190038120907f2ec9d1abd4cf1a1e0d4f33b9fdf60291c03df4db771556247139bf1d49c7ef8990600090a4336001600160a01b0316836001600160a01b031685604051610f6591906112e7565b60405190819003812060008252907f8c76e0c52acc07f7d9b1b08884ea6e5a3c479b5a7a48e562b24ae8133d869954906020016104ef565b60038181548110610fad57600080fd5b906000526020600020016000915090508054610fc8906113e4565b80601f0160208091040260200160405190810160405280929190818152602001828054610ff4906113e4565b80156110415780601f1061101657610100808354040283529160200191611041565b820191906000526020600020905b81548152906001019060200180831161102457829003601f168201915b505050505081565b634e487b7160e01b600052604160045260246000fd5b600082601f83011261107057600080fd5b813567ffffffffffffffff8082111561108b5761108b611049565b604051601f8301601f19908116603f011681019082821181831017156110b3576110b3611049565b816040528381528660208588010111156110cc57600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080604083850312156110ff57600080fd5b823567ffffffffffffffff81111561111657600080fd5b6111228582860161105f565b92505060208301356001600160a01b038116811461113f57600080fd5b809150509250929050565b60006020828403121561115c57600080fd5b813567ffffffffffffffff81111561117357600080fd5b61117f8482850161105f565b949350505050565b60006020828403121561119957600080fd5b5035919050565b60005b838110156111bb5781810151838201526020016111a3565b50506000910152565b600081518084526111dc8160208601602086016111a0565b601f01601f19169290920160200192915050565b60208152600061120360208301846111c4565b9392505050565b634e487b7160e01b600052602160045260246000fd5b6002811061123e57634e487b7160e01b600052602160045260246000fd5b9052565b602081526000825160a0602084015261125e60c08401826111c4565b905060018060a01b03602085015116604084015260408401516112846060850182611220565b5060608401516080840152608084015160a08401528091505092915050565b60a0815260006112b660a08301886111c4565b6001600160a01b038716602084015290506112d46040830186611220565b6060820193909352608001529392505050565b600082516112f98184602087016111a0565b9190910192915050565b60208082526022908201527f436c6173734d616e616765723a20436c61737320646f6573206e6f74206578696040820152611cdd60f21b606082015260800190565b60208082526032908201527f436c6173734d616e616765723a204f6e6c7920746561636865722063616e207060408201527132b93337b936903a3434b99030b1ba34b7b760711b606082015260800190565b6020808252601d908201527f436c6173734d616e616765723a20436c61737320697320636c6f736564000000604082015260600190565b634e487b7160e01b600052603260045260246000fd5b600181811c908216806113f857607f821691505b60208210810361141857634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111561146857600081815260208120601f850160051c810160208610156114455750805b601f850160051c820191505b8181101561146457828155600101611451565b5050505b505050565b815167ffffffffffffffff81111561148757611487611049565b61149b8161149584546113e4565b8461141e565b602080601f8311600181146114d057600084156114b85750858301515b600019600386901b1c1916600185901b178555611464565b600085815260208120601f198616915b828110156114ff578886015182559484019460019091019084016114e0565b508582101561151d5787850151600019600388901b60f8161c191681555b5050505050600190811b0190555056fea264697066735822122021bbfedf8482395fb47afbcf66d876a6839d7679fb51a084847262c11df1e99f64736f6c63430008130033"
}

